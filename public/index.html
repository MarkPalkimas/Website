<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mark Palkimas' Personal Website</title>
    <link rel="stylesheet" href="app.css" />
    <script>
      // Redirect to mobile version if on a mobile device
      if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        window.location.href = "mobile.html";
      }
    </script>
    <style>
      /* (Your existing styles remain here) */
    </style>
  </head>
  <body>
    <!-- Your Neon Glow Container, Dimming Overlay, Quote Container, Header, Main Content, Footer, etc. -->
    <!-- (Keep your existing HTML structure) -->

    <!-- Visitor Logging Script -->
    <script>
      // Generate or retrieve a unique device ID
      function getDeviceId() {
        let deviceId = localStorage.getItem('deviceId');
        if (!deviceId) {
          deviceId = 'device-' + Math.random().toString(36).substr(2, 9) + '-' + Date.now();
          localStorage.setItem('deviceId', deviceId);
        }
        return deviceId;
      }
      
      // Log visitor data with additional device information
      function logVisitor() {
        const userAgent = navigator.userAgent;
        const deviceId = getDeviceId();
        const platform = navigator.platform;
        const language = navigator.language;
        const screenWidth = window.screen.width;
        const screenHeight = window.screen.height;
        
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition((position) => {
            const data = {
              userAgent,
              deviceId,
              platform,
              language,
              screenWidth,
              screenHeight,
              latitude: position.coords.latitude,
              longitude: position.coords.longitude
            };
            fetch('/api/logVisitor', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(data)
            });
          }, (error) => {
            // If location permission is denied, log without location data
            const data = { userAgent, deviceId, platform, language, screenWidth, screenHeight };
            fetch('/api/logVisitor', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(data)
            });
          });
        } else {
          // Geolocation not supported
          const data = { userAgent, deviceId, platform, language, screenWidth, screenHeight };
          fetch('/api/logVisitor', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
          });
        }
      }
      
      document.addEventListener("DOMContentLoaded", logVisitor);
    </script>
    <script src="main.js"></script>
  </body>
</html>
