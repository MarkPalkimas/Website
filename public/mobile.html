<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Disable double-tap and pinch zoom -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1, minimum-scale=1">
  <title>Mark Palkimas - Mobile</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* ========================================================= */
    /* Variables & Base Styles                                  */
    /* ========================================================= */
    :root {
      --bg: #1a1a1a;
      --footer-bg: #3a3a3a;
      --text: #eee;
      --drop-btn-bg: #777;
      --drop-btn-hover: #999;
      --neon-colors: lime, yellow, orange, red, magenta, blue;
    }

    html {
      touch-action: manipulation;
    }

    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      -webkit-tap-highlight-color: transparent;
    }

    /* ========================================================= */
    /* Header Styling                                            */
    /* ========================================================= */
    header {
      position: sticky;
      top: 0;
      background: rgba(0, 0, 0, 0.8);
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 50;
    }

    header .logo {
      font-weight: 600;
      font-size: 1.2rem;
    }

    header .projects-link {
      color: var(--text);
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      transition: background 0.3s;
    }

    header .projects-link:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    /* ========================================================= */
    /* Main & Profile Section                                    */
    /* ========================================================= */
    main {
      flex: 1;
      padding: 1rem;
      margin-top: 4rem;
      position: relative;
    }

    .profile-container {
      text-align: center;
      margin-bottom: 2rem;
      position: relative;
      z-index: 10;
    }

    .profile-photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      animation: neon 8s linear infinite;
      cursor: pointer;
    }

    @keyframes neon {
      0%, 100% {
        box-shadow: 0 0 8px lime, 0 0 16px lime;
      }
      16% {
        box-shadow: 0 0 8px yellow, 0 0 16px yellow;
      }
      33% {
        box-shadow: 0 0 8px orange, 0 0 16px orange;
      }
      50% {
        box-shadow: 0 0 8px red, 0 0 16px red;
      }
      66% {
        box-shadow: 0 0 8px magenta, 0 0 16px magenta;
      }
      83% {
        box-shadow: 0 0 8px blue, 0 0 16px blue;
      }
    }

    .profile-photo:hover {
      transform: scale(1.05);
    }

    .profile-name {
      margin-top: 1rem;
      font-size: 1.4rem;
      font-weight: 600;
    }

    .about-popup {
      display: none;
      position: absolute;
      top: 75%;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      color: var(--text);
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.7);
      width: 80%;
      max-width: 260px;
      z-index: 20;
    }

    .dimmed {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 15;
      cursor: pointer;
    }

    /* ========================================================= */
    /* Lightning Canvas                                           */
    /* ========================================================= */
    canvas#lightning-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 8;
    }

    /* ========================================================= */
    /* Footer & Contact                                           */
    /* ========================================================= */
    footer {
      background: var(--footer-bg);
      margin-top: 280px; /* moved up 20px */
      padding: 1.5rem 1rem;
      text-align: center;
      position: relative;
      z-index: 5;
    }

    .social-links {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .social-links img {
      width: 32px;
      height: 32px;
      transition: transform 0.3s;
    }

    .social-links img:hover {
      transform: scale(1.2);
    }

    .gravity-footer {
      margin-top: 1rem;
    }

    .gravity-btn,
    .reset-btn {
      background: var(--drop-btn-bg);
      color: #fff;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 6px;
      font-size: 0.95rem;
      cursor: pointer;
      transition: opacity 0.3s, transform 0.2s, background 0.3s;
      margin: 0.5rem;
    }

    .gravity-btn:hover {
      background: var(--drop-btn-hover);
      opacity: 1;
      transform: translateY(-2px);
    }

    .reset-btn {
      background: #555;
      opacity: 0.8;
      display: none;
    }

    .reset-btn:hover {
      opacity: 1;
    }

    /* ========================================================= */
    /* Quotes & Balls                                             */
    /* ========================================================= */
    .falling-quote {
      position: absolute;
      font-size: 0.9rem;
      background: rgba(30,30,30,0.9);
      color: #ddd;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.7);
      z-index: 12;
    }

    .ball {
      position: absolute;
      border-radius: 50%;
      z-index: 6;
    }
  </style>
</head>
<body>
  <div class="dimmed" onclick="hideAbout()"></div>
  <canvas id="lightning-canvas"></canvas>

  <header>
    <div class="logo">Mark Palkimas</div>
    <a href="projects.html" class="projects-link">Projects</a>
  </header>

  <main>
    <section class="profile-container">
      <img src="assets/profile.jpg" class="profile-photo" onclick="toggleAbout()" alt="Profile Photo">
      <div class="profile-name">Hello, I’m Mark</div>
      <div class="about-popup">
        <h2>About Me</h2>
        <p>More detailed info about my background.</p>
      </div>
    </section>
  </main>

  <footer>
    <h2>Contact Me</h2>
    <div class="social-links">
      <a href="#"><img src="assets/iconmonstr-instagram-11-240.png" alt="Instagram"></a>
      <a href="#"><img src="assets/iconmonstr-linkedin-1-240.png" alt="LinkedIn"></a>
      <a href="#"><img src="assets/github-logo.png" alt="GitHub"></a>
      <a href="#"><img src="assets/iconmonstr-gmail-1-240.png" alt="Gmail"></a>
      <a href="#"><img src="assets/iconmonstr-youtube-6-240.png" alt="YouTube"></a>
    </div>
    <div class="gravity-footer">
      <button class="gravity-btn" onclick="dropBall()">Drop Ball</button>
      <button class="reset-btn" onclick="resetBalls()">Reset</button>
    </div>
    <p>&copy; 2024 Mark Palkimas. All rights reserved.</p>
  </footer>

  <script>
    // -----------------------------
    // About popup handlers
    // -----------------------------
    function toggleAbout() {
      document.querySelector('.about-popup').style.display = 'block';
      document.querySelector('.dimmed').style.display = 'block';
    }
    function hideAbout() {
      document.querySelector('.about-popup').style.display = 'none';
      document.querySelector('.dimmed').style.display = 'none';
    }

    // -----------------------------
    // Globals and setup
    // -----------------------------
    const balls = [];
    const quotes = [];
    const GRAVITY = 0.3;
    const REST = 0.8;
    const resetBtn = document.querySelector('.reset-btn');
    const footerEl = document.querySelector('footer');
    const neonColors = ['lime','yellow','orange','red','magenta','blue'];
    let quoteTime = Date.now();
    let lightningActive = false;

    // -----------------------------
    // Canvas lightning setup
    // -----------------------------
    const canvas = document.getElementById('lightning-canvas');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // -----------------------------
    // Quotes generation
    // -----------------------------
    const QUOTE_TEXTS = [
      "Life isn’t about what you know, it’s about what you’re able to figure out.",
      "The best time to plant a tree was 20 years ago. The second best time is today.",
      "Money is not the key to happiness; it is the key to pursuing opportunities.",
      "Cold water feels warm when your hands are freezing.",
      "Regret is proof you cared. Growth is proof you learned."
    ];

    function createQuote() {
      const q = document.createElement('div');
      q.className = 'falling-quote';
      q.innerText = QUOTE_TEXTS[Math.floor(Math.random() * QUOTE_TEXTS.length)];
      q.vx = (Math.random() - 0.5) * 0.5;
      q.vy = 1 + Math.random() * 0.5;
      q.style.left = Math.random() * (window.innerWidth - 200) + 'px';
      q.style.top = '-30px';
      document.body.appendChild(q);
      quotes.push(q);
    }

    // -----------------------------
    // Ball drop and start effects
    // -----------------------------
    function dropBall() {
      // Create ball element
      const b = document.createElement('div');
      const size = 30 + Math.random() * 30;
      Object.assign(b.style, {
        width: size + 'px',
        height: size + 'px',
        left: Math.random() * (window.innerWidth - size) + 'px',
        top: '0px',
        backgroundColor: '#' + Math.random().toString(16).slice(2,8)
      });
      b.className = 'ball';
      b.vx = Math.random() * 2 - 1;
      b.vy = 2 + Math.random() * 2;
      b.mass = size * size;
      document.body.appendChild(b);
      balls.push(b);
      resetBtn.style.display = 'inline-block';

      // Spawn quote leaves
      for (let i = 0; i < 5; i++) {
        setTimeout(createQuote, i * 300);
      }

      // Activate lightning
      if (!lightningActive) {
        lightningActive = true;
        scheduleLightning();
      }

      // Start physics animation
      if (balls.length === 1) {
        animateAll();
      }
    }

    function resetBalls() {
      balls.forEach(b => b.remove());
      balls.length = 0;
      resetBtn.style.display = 'none';
    }

    // -----------------------------
    // Lightning logic
    // -----------------------------
    function scheduleLightning() {
      if (!lightningActive) return;
      const burstCount = 3 + Math.floor(Math.random() * 5); // 3 to 7 strikes
      for (let i = 0; i < burstCount; i++) {
        setTimeout(drawLightning, i * 150);
      }
      setTimeout(scheduleLightning, 1000 + Math.random() * 1000);
    }

    function drawLightning() {
      const photo = document.querySelector('.profile-photo').getBoundingClientRect();
      const sx = photo.left + photo.width / 2;
      const sy = photo.top + photo.height / 2;
      // Constrain to downward sector (45°–135°)
      const angle = Math.random() * (Math.PI * 0.75) + Math.PI * 0.125;
      const length = canvas.height * (0.3 + Math.random() * 0.3);
      const ex = sx + Math.cos(angle) * length;
      const ey = sy + Math.sin(angle) * length;
      const col = neonColors[Math.floor((Date.now() % 6000) / 1000)];

      ctx.save();
      ctx.shadowBlur = ۳۰;
      ctx.shadowColor = col;
      ctx.globalCompositeOperation = 'lighter';
      ctx.strokeStyle = col;
      ctx.lineWidth = 2;
      ctx.beginPath();

      function branch(x1, y1, x2, y2, depth) {
        if (depth > 4) {
          ctx.moveTo(x1, y1);
          ctx.lineTo(x2, y2);
          return;
        }
        const mx = (x1 + x2) / 2 + (Math.random() - 0.5) * (100 / (depth + 1));
        const my = (y1 + y2) / 2 + (Math.random() - 0.5) * (100 / (depth + 1));
        branch(x1, y1, mx, my, depth + 1);
        branch(mx, my, x2, y2, depth + 1);
      }

      branch(sx, sy, ex, ey, 0);
      ctx.stroke();
      // Glow pass
      ctx.lineWidth = 6;
      ctx.globalAlpha = 0.2;
      ctx.stroke();
      ctx.globalAlpha = 1;
      ctx.restore();

      setTimeout(() => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }, 200);
    }

    // -----------------------------
    // Physics + Quotes animation
    // -----------------------------
    function animateAll() {
      const floorY = footerEl.getBoundingClientRect().top + window.scrollY;

      // Update balls positions + gravity
      balls.forEach(b => {
        b.vy += GRAVITY;
        let x = parseFloat(b.style.left);
        let y = parseFloat(b.style.top);
        let nx = x + b.vx;
        let ny = y + b.vy;

        // Wall collisions
        if (nx <= 0 || nx + b.offsetWidth >= window.innerWidth) {
          b.vx *= -REST;
          nx = Math.max(0, Math.min(nx, window.innerWidth - b.offsetWidth));
        }

        // Floor collision
        if (ny + b.offsetHeight >= floorY) {
          ny = floorY - b.offsetHeight;
          b.vy *= -REST;
          b.vx *= REST;
        }

        b.style.left = nx + 'px';
        b.style.top = ny + 'px';
      });

      // Update quotes + collision with balls
      quotes.forEach(q => {
        let qx = parseFloat(q.style.left);
        let qy = parseFloat(q.style.top);
        qy += q.vy;
        qx += q.vx;
        q.style.left = qx + 'px';
        q.style.top = qy + 'px';

        balls.forEach(b => {
          const ax = qx + ۱۰;
          const ay = qy + ۱۰;
          const bx = parseFloat(b.style.left) + b.offsetWidth / 2;
          const by = parseFloat(b.style.top) + b.offsetHeight / 2;
          const dx = bx - ax;
          const dy = by - ay;
          const dist = Math.hypot(dx, dy);
          const radiusSum = ۱۰ + b.offsetWidth / 2;

          if (dist < radiusSum) {
            q.vy *= -0.5;
            q.vx *= -0.5;
          }
        });

        // Remove off-screen quotes
        if (qy > window.innerHeight) {
          q.remove();
        }
      });

      // Ball-ball collisions
      for (let i = 0; i < balls.length; i++) {
        for (let j = i + 1; j < balls.length; j++) {
          const A = balls[i];
          const B = balls[j];
          const ax = parseFloat(A.style.left) + A.offsetWidth / 2;
          const ay = parseFloat(A.style.top) + A.offsetHeight / 2;
          const bx = parseFloat(B.style.left) + B.offsetWidth / 2;
          const by = parseFloat(B.style.top) + B.offsetHeight / 2;
          const dx = bx - ax;
          const dy = by - ay;
          const dist = Math.hypot(dx, dy);
          const r = (A.offsetWidth + B.offsetWidth) / 2;

          if (dist < r && dist > 0) {
            const nx = dx / dist;
            const ny = dy / dist;
            const p = 2 * (A.vx * nx + A.vy * ny - B.vx * nx - B.vy * ny) / (A.mass + B.mass);
            A.vx -= p * B.mass * nx;
            A.vy -= p * B.mass * ny;
            B.vx += p * A.mass * nx;
            B.vy += p * A.mass * ny;
            const overlap = r - dist;
            A.style.left = (parseFloat(A.style.left) - nx * overlap / 2) + 'px';
            A.style.top = (parseFloat(A.style.top) - ny * overlap / 2) + 'px';
            B.style.left = (parseFloat(B.style.left) + nx * overlap / 2) + 'px';
            B.style.top = (parseFloat(B.style.top) + ny * overlap / 2) + 'px';
          }
        }
      }

      // Loop
      requestAnimationFrame(animateAll);
    }
  </script>
</body>
</html>
